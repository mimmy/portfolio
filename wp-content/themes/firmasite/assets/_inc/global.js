/* TinyMCE integrate for buddypress */
// http://wordpress.org/extend/plugins/bp-tinymce/
jQuery(document).ready(function(){jQuery("input#aw-whats-new-submit").click(function(){tinyMCE.triggerSave();jQuery("#whats-new_ifr").contents().find("#tinymce").html()});jQuery("input#send_reply_button").click(function(){tinyMCE.triggerSave();jQuery("#whats-new_ifr").contents().find("#tinymce").html()})});var jq=jQuery,bp_ajax_request=null;
jq(document).ready(function(){"-1"==window.location.search.indexOf("new")&&jq("div.forums").length?jq("#new-topic-post").hide():jq("#new-topic-post").show();bp_init_activity();bp_init_objects(["members","groups","blogs","forums"]);jq.query.get("r")&&jq("textarea#whats-new").length&&(jq("#whats-new-options").animate({height:"40px"}),jq("form#whats-new-form textarea").animate({height:"50px"}),jq.scrollTo(jq("textarea#whats-new"),500,{offset:-125,easing:"easeOutQuad"}),jq("textarea#whats-new").focus());
jq("#whats-new").focus(function(){jq("#whats-new-options").animate({height:"40px"});jq("form#whats-new-form textarea").animate({height:"50px"});jq("#aw-whats-new-submit").prop("disabled",!1)});jq("input#aw-whats-new-submit").click(function(){var a=jq(this),b=a.parent().parent().parent().parent();b.children().each(function(){(jq.nodeName(this,"textarea")||jq.nodeName(this,"input"))&&jq(this).prop("disabled",!0)});jq("div.error").remove();a.addClass("loading");a.prop("disabled",!0);var a="",d=jq("#whats-new-post-in").val(),
c=jq("textarea#whats-new").val();0<d&&(a=jq("#whats-new-post-object").val());jq.post(ajaxurl,{action:"post_update",cookie:encodeURIComponent(document.cookie),_wpnonce_post_update:jq("input#_wpnonce_post_update").val(),content:c,object:a,item_id:d,_bp_as_nonce:jq("#_bp_as_nonce").val()||""},function(a){b.children().each(function(){(jq.nodeName(this,"textarea")||jq.nodeName(this,"input"))&&jq(this).prop("disabled",!1)});if("-1"==a[0]+a[1])b.prepend(a.substr(2,a.length)),jq("form#"+b.attr("id")+" div.error").hide().fadeIn(200);
else{0==jq("ul.activity-list").length&&(jq("div.error").slideUp(100).remove(),jq("div#message").slideUp(100).remove(),jq("div.activity").append('<ul id="activity-stream" class="activity-list item-list">'));jq("ul#activity-stream").prepend(a);jq("ul#activity-stream li:first").addClass("new-update");if(0!=jq("#latest-update").length){a=jq("ul#activity-stream li.new-update .activity-content .activity-inner p").html();var c=jq("ul#activity-stream li.new-update .activity-content .activity-header p a.view").attr("href"),
d="";""!=jq("ul#activity-stream li.new-update .activity-content .activity-inner p").text()&&(d=a+" ");d+='<a href="'+c+'" rel="nofollow">'+BP_DTheme.view+"</a>";jq("#latest-update").slideUp(300,function(){jq("#latest-update").html(d);jq("#latest-update").slideDown(300)})}jq("li.new-update").hide().slideDown(300);jq("li.new-update").removeClass("new-update");jq("textarea#whats-new").val("")}jq("#whats-new-options").animate({height:"0px"});jq("form#whats-new-form textarea").animate({height:"20px"});
jq("#aw-whats-new-submit").prop("disabled",!0).removeClass("loading")});return!1});jq("div.activity-type-tabs").click(function(a){var b=jq(a.target).parent();if("STRONG"==a.target.nodeName||"SPAN"==a.target.nodeName)b=b.parent();else if("A"!=a.target.nodeName)return!1;jq.cookie("bp-activity-oldestpage",1,{path:"/"});a=b.attr("id").substr(9,b.attr("id").length);var d=jq("#activity-filter-select select").val();"mentions"==a&&jq("li#"+b.attr("id")+" a strong").remove();bp_activity_request(a,d);return!1});
jq("#activity-filter-select select").change(function(){var a=jq("div.activity-type-tabs li.selected"),a=a.length?a.attr("id").substr(9,a.attr("id").length):null,b=jq(this).val();bp_activity_request(a,b);return!1});jq("div.activity").click(function(a){var b=jq(a.target);if(b.hasClass("fav")||b.hasClass("unfav")){var d=b.hasClass("fav")?"fav":"unfav";a=b.closest(".activity-item");a=a.attr("id").substr(9,a.attr("id").length);b.addClass("loading");jq.post(ajaxurl,{action:"activity_mark_"+d,cookie:encodeURIComponent(document.cookie),
id:a},function(a){b.removeClass("loading");b.fadeOut(100,function(){jq(this).html(a);jq(this).attr("title","fav"==d?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav);jq(this).fadeIn(100)});"fav"==d?(jq(".item-list-tabs li#activity-favorites").length||jq(".item-list-tabs ul li#activity-mentions").before('<li id="activity-favorites"><a href="#">'+BP_DTheme.my_favs+" <span>0</span></a></li>"),b.removeClass("fav"),b.addClass("unfav"),jq(".item-list-tabs ul li#activity-favorites span").html(Number(jq(".item-list-tabs ul li#activity-favorites span").html())+
1)):(b.removeClass("unfav"),b.addClass("fav"),jq(".item-list-tabs ul li#activity-favorites span").html(Number(jq(".item-list-tabs ul li#activity-favorites span").html())-1),Number(jq(".item-list-tabs ul li#activity-favorites span").html())||(jq(".item-list-tabs ul li#activity-favorites").hasClass("selected")&&bp_activity_request(null,null),jq(".item-list-tabs ul li#activity-favorites").remove()));"activity-favorites"==jq(".item-list-tabs li.selected").attr("id")&&b.parent().parent().parent().slideUp(100)});
return!1}if(b.hasClass("delete-activity")){var c=b.parents("div.activity ul li");a=c.attr("id").substr(9,c.attr("id").length);var f=b.attr("href").split("_wpnonce="),f=f[1];b.addClass("loading");jq.post(ajaxurl,{action:"delete_activity",cookie:encodeURIComponent(document.cookie),id:a,_wpnonce:f},function(a){"-1"==a[0]+a[1]?(c.prepend(a.substr(2,a.length)),c.children("div#message").hide().fadeIn(300)):c.slideUp(300)});return!1}if(b.hasClass("spam-activity"))return c=b.parents("div.activity ul li"),
b.addClass("loading"),jq.post(ajaxurl,{action:"bp_spam_activity",cookie:encodeURIComponent(document.cookie),id:c.attr("id").substr(9,c.attr("id").length),_wpnonce:b.attr("href").split("_wpnonce=")[1]},function(a){"-1"===a[0]+a[1]?(c.prepend(a.substr(2,a.length)),c.children("div#message").hide().fadeIn(300)):c.slideUp(300)}),!1;if(b.parent().hasClass("load-more")){jq("#content li.load-more").addClass("loading");null==jq.cookie("bp-activity-oldestpage")&&jq.cookie("bp-activity-oldestpage",1,{path:"/"});
var e=1*jq.cookie("bp-activity-oldestpage")+1;jq.post(ajaxurl,{action:"activity_get_older_updates",cookie:encodeURIComponent(document.cookie),page:e},function(a){jq("#content li.load-more").removeClass("loading");jq.cookie("bp-activity-oldestpage",e,{path:"/"});jq("#content ul.activity-list").append(a.contents);b.parent().hide()},"json");return!1}});jq(".activity-read-more a").live("click",function(a){a=jq(a.target);var b=a.parent().attr("id").split("-"),d=b[3],b=b[0],c=jq("li#"+b+"-"+d+" ."+("acomment"==
b?"acomment-content":"activity-inner")+":first");jq(a).addClass("loading");jq.post(ajaxurl,{action:"get_single_activity_content",activity_id:d},function(a){jq(c).slideUp(300).html(a).slideDown(300)});return!1});jq("form.ac-form").hide();jq(".activity-comments").length&&bp_dtheme_hide_comments();jq("div.activity").click(function(a){var b=jq(a.target);if(b.hasClass("acomment-reply")||b.parent().hasClass("acomment-reply")){b.parent().hasClass("acomment-reply")&&(b=b.parent());ids=b.attr("id").split("-");
a=ids[2];var d=b.attr("href").substr(10,b.attr("href").length),c=jq("#ac-form-"+a);c.css("display","none");c.removeClass("root");jq(".ac-form").hide();c.children("div").each(function(){jq(this).hasClass("error")&&jq(this).hide()});"comment"!=ids[1]?jq(".activity-comments li#acomment-"+d).append(c):jq("li#activity-"+a+" .activity-comments").append(c);c.parent().hasClass("activity-comments")&&c.addClass("root");c.slideDown(200);jq.scrollTo(c,500,{offset:-100,easing:"easeOutQuad"});jq("#ac-form-"+ids[2]+
" textarea").focus();return!1}if("ac_form_submit"==b.attr("name")){c=b.parent().parent();a=c.parent();var f=c.attr("id").split("-");a=a.hasClass("activity-comments")?f[2]:a.attr("id").split("-")[1];jq("form#"+c.attr("id")+" div.error").hide();b.addClass("loading").prop("disabled",!0);var d={action:"new_activity_comment",cookie:encodeURIComponent(document.cookie),_wpnonce_new_activity_comment:jq("input#_wpnonce_new_activity_comment").val(),comment_id:a,form_id:f[2],content:jq("form#"+c.attr("id")+
" textarea").val()},e=jq("#_bp_as_nonce_"+a).val();e&&(d["_bp_as_nonce_"+a]=e);jq.post(ajaxurl,d,function(a){b.removeClass("loading");"-1"==a[0]+a[1]?c.append(a.substr(2,a.length)).hide().fadeIn(200):(c.fadeOut(200,function(){0==c.parent().children("ul").length&&(c.parent().hasClass("activity-comments")?c.parent().prepend("<ul></ul>"):c.parent().append("<ul></ul>"));c.parent().children("ul").append(a).hide().fadeIn(200);c.children("textarea").val("");c.parent().parent().addClass("has-comments")}),
jq("form#"+c.attr("id")+" textarea").val(""),jq("li#activity-"+f[2]+" a.acomment-reply span").html(Number(jq("li#activity-"+f[2]+" a.acomment-reply span").html())+1));jq(b).prop("disabled",!1)});return!1}if(b.hasClass("acomment-delete")){a=b.attr("href");var g=b.parent().parent(),c=g.parents("div.activity-comments").children("form"),d=a.split("_wpnonce="),d=d[1];a=a.split("cid=");a=a[1].split("&");a=a[0];b.addClass("loading");jq(".activity-comments ul .error").remove();g.parents(".activity-comments").append(c);
jq.post(ajaxurl,{action:"delete_activity_comment",cookie:encodeURIComponent(document.cookie),_wpnonce:d,id:a},function(a){if("-1"==a[0]+a[1])g.prepend(a.substr(2,a.length)).hide().fadeIn(200);else{a=jq("li#"+g.attr("id")+" ul").children("li");var b=0;jq(a).each(function(){jq(this).is(":hidden")||b++});g.fadeOut(200);a=jq("li#"+g.parents("ul#activity-stream > li").attr("id")+" a.acomment-reply span");var c=a.html()-(1+b);a.html(c);0==c&&jq(g.parents("ul#activity-stream > li")).removeClass("has-comments")}});
return!1}if(b.hasClass("spam-activity-comment"))return a=b.attr("href"),g=b.parent().parent(),b.addClass("loading"),jq(".activity-comments ul div.error").remove(),g.parents(".activity-comments").append(g.parents(".activity-comments").children("form")),jq.post(ajaxurl,{action:"bp_spam_activity_comment",cookie:encodeURIComponent(document.cookie),_wpnonce:a.split("_wpnonce=")[1],id:a.split("cid=")[1].split("&")[0]},function(a){if("-1"==a[0]+a[1])g.prepend(a.substr(2,a.length)).hide().fadeIn(200);else{a=
jq("li#"+g.attr("id")+" ul").children("li");var b=0;jq(a).each(function(){jq(this).is(":hidden")||b++});g.fadeOut(200);a=g.parents("ul#activity-stream > li");jq("li#"+a.attr("id")+" a.acomment-reply span").html(jq("li#"+a.attr("id")+" a.acomment-reply span").html()-(1+b))}}),!1;if(b.parent().hasClass("show-all"))return b.parent().addClass("loading"),setTimeout(function(){b.parent().parent().children("li").fadeIn(200,function(){b.parent().remove()})},600),!1});jq(document).keydown(function(a){a=a||
window.event;a.target?element=a.target:a.srcElement&&(element=a.srcElement);3==element.nodeType&&(element=element.parentNode);!0!=a.ctrlKey&&!0!=a.altKey&&!0!=a.metaKey&&27==(a.keyCode?a.keyCode:a.which)&&"TEXTAREA"==element.tagName&&jq(element).hasClass("ac-input")&&jq(element).parent().parent().parent().slideUp(200)});jq(".dir-search").click(function(a){if(!jq(this).hasClass("no-ajax")&&(a=jq(a.target),"submit"==a.attr("type"))){var b=jq(".item-list-tabs li.selected").attr("id").split("-")[0];bp_filter_request(b,
jq.cookie("bp-"+b+"-filter"),jq.cookie("bp-"+b+"-scope"),"div."+b,a.parent().children("label").children("input").val(),1,jq.cookie("bp-"+b+"-extras"));return!1}});jq("div.item-list-tabs").click(function(a){if(!jq(this).hasClass("no-ajax")){var b=jq(a.target).parent();if("LI"==a.target.parentNode.nodeName&&!b.hasClass("last")){b=b.attr("id").split("-");a=b[0];if("activity"==a)return!1;var b=b[1],d=jq("#"+a+"-order-select select").val(),c=jq("#"+a+"_search").val();bp_filter_request(a,d,b,"div."+a,c,
1,jq.cookie("bp-"+a+"-extras"));return!1}}});jq("li.filter select").change(function(){var a=(jq(".item-list-tabs li.selected").length?jq(".item-list-tabs li.selected"):jq(this)).attr("id").split("-"),b=a[0],a=a[1],d=jq(this).val(),c=!1;jq(".dir-search input").length&&(c=jq(".dir-search input").val());"friends"==b&&(b="members");bp_filter_request(b,d,a,"div."+b,c,1,jq.cookie("bp-"+b+"-extras"));return!1});jq("div#content").click(function(a){a=jq(a.target);if(a.hasClass("button"))return!0;if(a.parent().parent().hasClass("pagination")&&
!a.parent().parent().hasClass("no-ajax")){if(a.hasClass("dots")||a.hasClass("current"))return!1;var b=1,d=(jq(".item-list-tabs li.selected").length?jq(".item-list-tabs li.selected"):jq("li.filter select")).attr("id").split("-")[0],c=!1;jq("div.dir-search input").length&&(c=jq(".dir-search input").val());b=jq(a).hasClass("next")?Number(jq(".pagination span.current").html())+1:jq(a).hasClass("prev")?Number(jq(".pagination span.current").html())-1:Number(jq(a).html());bp_filter_request(d,jq.cookie("bp-"+
d+"-filter"),jq.cookie("bp-"+d+"-scope"),"div."+d,c,b,jq.cookie("bp-"+d+"-extras"));return!1}});jq("a.show-hide-new").click(function(){if(!jq("#new-topic-post").length)return!1;jq("#new-topic-post").is(":visible")?jq("#new-topic-post").slideUp(200):jq("#new-topic-post").slideDown(200,function(){jq("#topic_title").focus()});return!1});jq("input#submit_topic_cancel").click(function(){if(!jq("#new-topic-post").length)return!1;jq("#new-topic-post").slideUp(200);return!1});jq("#forum-directory-tags a").click(function(){bp_filter_request("forums",
"tags",jq.cookie("bp-forums-scope"),"div.forums",jq(this).html().replace(/&nbsp;/g,"-"),1,jq.cookie("bp-forums-extras"));return!1});jq("div#invite-list input").click(function(){jq(".ajax-loader").toggle();var a=jq(this).val(),b=!0==jq(this).prop("checked")?"invite":"uninvite";jq(".item-list-tabs li.selected").addClass("loading");jq.post(ajaxurl,{action:"groups_invite_user",friend_action:b,cookie:encodeURIComponent(document.cookie),_wpnonce:jq("input#_wpnonce_invite_uninvite_user").val(),friend_id:a,
group_id:jq("input#group_id").val()},function(d){jq("#message")&&jq("#message").hide();jq(".ajax-loader").toggle();"invite"==b?jq("#friend-list").append(d):"uninvite"==b&&jq("#friend-list li#uid-"+a).remove();jq(".item-list-tabs li.selected").removeClass("loading")})});jq("#friend-list li a.remove").live("click",function(){jq(".ajax-loader").toggle();var a=jq(this).attr("id"),a=a.split("-"),a=a[1];jq.post(ajaxurl,{action:"groups_invite_user",friend_action:"uninvite",cookie:encodeURIComponent(document.cookie),
_wpnonce:jq("input#_wpnonce_invite_uninvite_user").val(),friend_id:a,group_id:jq("input#group_id").val()},function(b){jq(".ajax-loader").toggle();jq("#friend-list li#uid-"+a).remove();jq("#invite-list input#f-"+a).prop("checked",!1)});return!1});jq(".field-visibility-settings").hide();jq(".visibility-toggle-link").on("click",function(){var a=jq(this).parent();jq(a).fadeOut(600,function(){jq(a).siblings(".field-visibility-settings").slideDown(400)});return!1});jq(".field-visibility-settings-close").on("click",
function(){var a=jq(this).parent();jq(a).slideUp(400,function(){jq(a).siblings(".field-visibility-settings-toggle").fadeIn(800)});return!1});jq("ul#friend-list a.accept, ul#friend-list a.reject").click(function(){var a=jq(this),b=jq(this).parents("ul#friend-list li"),d=jq(this).parents("li div.action"),c=b.attr("id").substr(11,b.attr("id").length),f=a.attr("href").split("_wpnonce="),f=f[1];if(jq(this).hasClass("accepted")||jq(this).hasClass("rejected"))return!1;if(jq(this).hasClass("accept")){var e=
"accept_friendship";d.children("a.reject").css("visibility","hidden")}else e="reject_friendship",d.children("a.accept").css("visibility","hidden");a.addClass("loading");jq.post(ajaxurl,{action:e,cookie:encodeURIComponent(document.cookie),id:c,_wpnonce:f},function(c){a.removeClass("loading");"-1"==c[0]+c[1]?(b.prepend(c.substr(2,c.length)),b.children("div#message").hide().fadeIn(200)):a.fadeOut(100,function(){jq(this).hasClass("accept")?(d.children("a.reject").hide(),jq(this).html(BP_DTheme.accepted).fadeIn(50),
jq(this).addClass("accepted")):(d.children("a.accept").hide(),jq(this).html(BP_DTheme.rejected).fadeIn(50),jq(this).addClass("rejected"))})});return!1});jq(".friendship-button a").live("click",function(){jq(this).parent().addClass("loading");var a=jq(this).attr("id"),a=a.split("-"),a=a[1],b=jq(this).attr("href"),b=b.split("?_wpnonce="),b=b[1].split("&"),b=b[0],d=jq(this);jq.post(ajaxurl,{action:"addremove_friend",cookie:encodeURIComponent(document.cookie),fid:a,_wpnonce:b},function(a){var b=d.attr("rel"),
e=d.parent();"add"==b?jq(e).fadeOut(200,function(){e.removeClass("add_friend");e.removeClass("loading");e.addClass("pending_friend");e.fadeIn(200).html(a)}):"remove"==b&&jq(e).fadeOut(200,function(){e.removeClass("remove_friend");e.removeClass("loading");e.addClass("add");e.fadeIn(200).html(a)})});return!1});jq(".group-button a").live("click",function(){var a=jq(this).parent().attr("id"),a=a.split("-"),a=a[1],b=jq(this).attr("href"),b=b.split("?_wpnonce="),b=b[1].split("&"),b=b[0],d=jq(this);jq.post(ajaxurl,
{action:"joinleave_group",cookie:encodeURIComponent(document.cookie),gid:a,_wpnonce:b},function(a){var b=d.parent();jq("body.directory").length?jq(b).fadeOut(200,function(){b.fadeIn(200).html(a)}):location.href=location.href});return!1});jq(".pending").click(function(){return!1});jq(".message-search").click(function(a){if(!jq(this).hasClass("no-ajax")&&(a=jq(a.target),"submit"==a.attr("type")))return bp_filter_request("messages",jq.cookie("bp-messages-filter"),jq.cookie("bp-messages-scope"),"div.messages",
a.parent().children("label").children("input").val(),1,jq.cookie("bp-messages-extras")),!1});jq("input#send_reply_button").click(function(){var a=jq("#messages_order").val()||"ASC",b=jq("#message-recipients").offset(),d=jq("input#send_reply_button");jq(d).addClass("loading");jq.post(ajaxurl,{action:"messages_send_reply",cookie:encodeURIComponent(document.cookie),_wpnonce:jq("input#send_message_nonce").val(),content:jq("#message_content").val(),send_to:jq("input#send_to").val(),subject:jq("input#subject").val(),
thread_id:jq("input#thread_id").val()},function(c){"-1"==c[0]+c[1]?jq("form#send-reply").prepend(c.substr(2,c.length)):(jq("form#send-reply div#message").remove(),jq("#message_content").val(""),"ASC"==a?jq("form#send-reply").before(c):(jq("#message-recipients").after(c),jq(window).scrollTop(b.top)),jq(".new-message").hide().slideDown(200,function(){jq(".new-message").removeClass("new-message")}));jq(d).removeClass("loading")});return!1});jq("a#mark_as_read, a#mark_as_unread").click(function(){var a=
"",b=jq("#message-threads tr td input[type='checkbox']");if("mark_as_unread"==jq(this).attr("id"))var d="read",c="unread",f=1,e="inline",g="messages_markunread";else d="unread",c="read",f=0,e="none",g="messages_markread";b.each(function(g){if(jq(this).is(":checked")&&jq("tr#m-"+jq(this).attr("value")).hasClass(d)){a+=jq(this).attr("value");jq("tr#m-"+jq(this).attr("value")).removeClass(d);jq("tr#m-"+jq(this).attr("value")).addClass(c);jq("tr#m-"+jq(this).attr("value")+" td span.unread-count").html();
jq("tr#m-"+jq(this).attr("value")+" td span.unread-count").html(f);jq("tr#m-"+jq(this).attr("value")+" td span.unread-count").css("display",e);var h=jq("tr.unread").length;jq("a#user-messages span").html(h);g!=b.length-1&&(a+=",")}});jq.post(ajaxurl,{action:g,thread_ids:a});return!1});jq("select#message-type-select").change(function(){var a=jq("select#message-type-select").val(),b=jq("td input[type='checkbox']");b.each(function(a){b[a].checked=""});switch(a){case "unread":b=jq("tr.unread td input[type='checkbox']");
break;case "read":b=jq("tr.read td input[type='checkbox']")}""!=a?b.each(function(a){b[a].checked="checked"}):b.each(function(a){b[a].checked=""})});jq("a#delete_inbox_messages, a#delete_sentbox_messages").click(function(){checkboxes_tosend="";checkboxes=jq("#message-threads tr td input[type='checkbox']");jq("div#message").remove();jq(this).addClass("loading");jq(checkboxes).each(function(a){jq(this).is(":checked")&&(checkboxes_tosend+=jq(this).attr("value")+",")});if(""==checkboxes_tosend)return jq(this).removeClass("loading"),
!1;jq.post(ajaxurl,{action:"messages_delete",thread_ids:checkboxes_tosend},function(a){"-1"==a[0]+a[1]?jq("#message-threads").prepend(a.substr(2,a.length)):(jq("#message-threads").before('<div id="message" class="updated"><p>'+a+"</p></div>"),jq(checkboxes).each(function(a){jq(this).is(":checked")&&jq(this).parent().parent().fadeOut(150)}));jq("div#message").hide().slideDown(150);jq("a#delete_inbox_messages, a#delete_sentbox_messages").removeClass("loading")});return!1});jq("a#close-notice").click(function(){jq(this).addClass("loading");
jq("div#sidebar div.error").remove();jq.post(ajaxurl,{action:"messages_close_notice",notice_id:jq(".notice").attr("rel").substr(2,jq(".notice").attr("rel").length)},function(a){jq("a#close-notice").removeClass("loading");"-1"==a[0]+a[1]?(jq(".notice").prepend(a.substr(2,a.length)),jq("div#sidebar div.error").hide().fadeIn(200)):jq(".notice").slideUp(100)});return!1});jq("#wp-admin-bar ul.main-nav li, #nav li").mouseover(function(){jq(this).addClass("sfhover")});jq("#wp-admin-bar ul.main-nav li, #nav li").mouseout(function(){jq(this).removeClass("sfhover")});
jq("a.logout").click(function(){jq.cookie("bp-activity-scope",null,{path:"/"});jq.cookie("bp-activity-filter",null,{path:"/"});jq.cookie("bp-activity-oldestpage",null,{path:"/"});var a=["members","groups","blogs","forums"];jq(a).each(function(b){jq.cookie("bp-"+a[b]+"-scope",null,{path:"/"});jq.cookie("bp-"+a[b]+"-filter",null,{path:"/"});jq.cookie("bp-"+a[b]+"-extras",null,{path:"/"})})})});
function bp_init_activity(){jq.cookie("bp-activity-oldestpage",1,{path:"/"});null!=jq.cookie("bp-activity-filter")&&jq("#activity-filter-select").length&&jq('#activity-filter-select select option[value="'+jq.cookie("bp-activity-filter")+'"]').prop("selected",!0);null!=jq.cookie("bp-activity-scope")&&jq(".activity-type-tabs").length&&(jq(".activity-type-tabs li").each(function(){jq(this).removeClass("selected active")}),jq("li#activity-"+jq.cookie("bp-activity-scope")+", .item-list-tabs li.current").addClass("selected active"))}
function bp_init_objects(a){jq(a).each(function(b){null!=jq.cookie("bp-"+a[b]+"-filter")&&jq("li#"+a[b]+"-order-select select").length&&jq("li#"+a[b]+'-order-select select option[value="'+jq.cookie("bp-"+a[b]+"-filter")+'"]').prop("selected",!0);null!=jq.cookie("bp-"+a[b]+"-scope")&&jq("div."+a[b]).length&&(jq(".item-list-tabs li").each(function(){jq(this).removeClass("selected active")}),jq(".item-list-tabs li#"+a[b]+"-"+jq.cookie("bp-"+a[b]+"-scope")+", div.item-list-tabs#object-nav li.current").addClass("selected active"))})}
function bp_filter_request(a,b,d,c,f,e,g){if("activity"==a)return!1;jq.query.get("s")&&!f&&(f=jq.query.get("s"));null==d&&(d="all");jq.cookie("bp-"+a+"-scope",d,{path:"/"});jq.cookie("bp-"+a+"-filter",b,{path:"/"});jq.cookie("bp-"+a+"-extras",g,{path:"/"});jq(".item-list-tabs li").each(function(){jq(this).removeClass("selected active")});jq(".item-list-tabs li#"+a+"-"+d+", .item-list-tabs#object-nav li.current").addClass("selected active");jq(".item-list-tabs li.selected").addClass("loading");jq('.item-list-tabs select option[value="'+
b+'"]').prop("selected",!0);"friends"==a&&(a="members");bp_ajax_request&&bp_ajax_request.abort();bp_ajax_request=jq.post(ajaxurl,{action:a+"_filter",cookie:encodeURIComponent(document.cookie),object:a,filter:b,search_terms:f,scope:d,page:e,extras:g},function(a){jq(c).fadeOut(100,function(){jq(this).html(a);jq(this).fadeIn(100)});jq(".item-list-tabs li.selected").removeClass("loading")})}
function bp_activity_request(a,b){jq.cookie("bp-activity-scope",a,{path:"/"});jq.cookie("bp-activity-filter",b,{path:"/"});jq.cookie("bp-activity-oldestpage",1,{path:"/"});jq(".item-list-tabs li").each(function(){jq(this).removeClass("selected active loading")});jq("li#activity-"+a+", .item-list-tabs li.current").addClass("selected active");jq("#object-nav.item-list-tabs li.selected, div.activity-type-tabs li.selected").addClass("loading");jq('#activity-filter-select select option[value="'+b+'"]').prop("selected",
!0);jq(".widget_bp_activity_widget h2 span.ajax-loader").show();bp_ajax_request&&bp_ajax_request.abort();bp_ajax_request=jq.post(ajaxurl,{action:"activity_widget_filter",cookie:encodeURIComponent(document.cookie),_wpnonce_activity_filter:jq("input#_wpnonce_activity_filter").val(),scope:a,filter:b},function(a){jq(".widget_bp_activity_widget h2 span.ajax-loader").hide();jq("div.activity").fadeOut(100,function(){jq(this).html(a.contents);jq(this).fadeIn(100);bp_dtheme_hide_comments()});null!=a.feed_url&&
jq(".directory #subnav li.feed a, .home-page #subnav li.feed a").attr("href",a.feed_url);jq(".item-list-tabs li.selected").removeClass("loading")},"json")}
function bp_dtheme_hide_comments(){var a=jq("div.activity-comments");if(!a.length)return!1;a.each(function(){if(!(5>jq(this).children("ul").children("li").length)){var a=jq(this).parents("ul#activity-stream > li"),d=jq(this).children("ul").children("li"),c=" ";jq("li#"+a.attr("id")+" a.acomment-reply span").length&&(c=jq("li#"+a.attr("id")+" a.acomment-reply span").html());d.each(function(f){f<d.length-5&&(jq(this).addClass("hidden"),jq(this).toggle(),f||jq(this).before('<li class="show-all"><a href="#'+
a.attr("id")+'/show-all/" title="'+BP_DTheme.show_all_comments+'">'+BP_DTheme.show_all+" "+c+" "+BP_DTheme.comments+"</a></li>"))})}})}function checkAll(){for(var a=document.getElementsByTagName("input"),b=0;b<a.length;b++)"checkbox"==a[b].type&&(""==$("check_all").checked?a[b].checked="":a[b].checked="checked")}
function clear(a){if(document.getElementById(a)){a=document.getElementById(a);if(radioButtons=a.getElementsByTagName("INPUT"))for(var b=0;b<radioButtons.length;b++)radioButtons[b].checked="";if(options=a.getElementsByTagName("OPTION"))for(b=0;b<options.length;b++)options[b].selected=!1}};



/* ScrollTo plugin - just inline and minified */
;(function(d){var k=d.scrollTo=function(a,i,e){d(window).scrollTo(a,i,e)};k.defaults={axis:'xy',duration:parseFloat(d.fn.jquery)>=1.3?0:1};k.window=function(a){return d(window)._scrollable()};d.fn._scrollable=function(){return this.map(function(){var a=this,i=!a.nodeName||d.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!i)return a;var e=(a.contentWindow||a).document||a.ownerDocument||a;return d.browser.safari||e.compatMode=='BackCompat'?e.body:e.documentElement})};d.fn.scrollTo=function(n,j,b){if(typeof j=='object'){b=j;j=0}if(typeof b=='function')b={onAfter:b};if(n=='max')n=9e9;b=d.extend({},k.defaults,b);j=j||b.speed||b.duration;b.queue=b.queue&&b.axis.length>1;if(b.queue)j/=2;b.offset=p(b.offset);b.over=p(b.over);return this._scrollable().each(function(){var q=this,r=d(q),f=n,s,g={},u=r.is('html,body');switch(typeof f){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(f)){f=p(f);break}f=d(f,this);case'object':if(f.is||f.style)s=(f=d(f)).offset()}d.each(b.axis.split(''),function(a,i){var e=i=='x'?'Left':'Top',h=e.toLowerCase(),c='scroll'+e,l=q[c],m=k.max(q,i);if(s){g[c]=s[h]+(u?0:l-r.offset()[h]);if(b.margin){g[c]-=parseInt(f.css('margin'+e))||0;g[c]-=parseInt(f.css('border'+e+'Width'))||0}g[c]+=b.offset[h]||0;if(b.over[h])g[c]+=f[i=='x'?'width':'height']()*b.over[h]}else{var o=f[h];g[c]=o.slice&&o.slice(-1)=='%'?parseFloat(o)/100*m:o}if(/^\d+$/.test(g[c]))g[c]=g[c]<=0?0:Math.min(g[c],m);if(!a&&b.queue){if(l!=g[c])t(b.onAfterFirst);delete g[c]}});t(b.onAfter);function t(a){r.animate(g,j,b.easing,a&&function(){a.call(this,n,b)})}}).end()};k.max=function(a,i){var e=i=='x'?'Width':'Height',h='scroll'+e;if(!d(a).is('html,body'))return a[h]-d(a)[e.toLowerCase()]();var c='client'+e,l=a.ownerDocument.documentElement,m=a.ownerDocument.body;return Math.max(l[h],m[h])-Math.min(l[c],m[c])};function p(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);

/* jQuery Easing Plugin, v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/ */
jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,f,a,h,g){return jQuery.easing[jQuery.easing.def](e,f,a,h,g)},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e},easeOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}return g*Math.pow(2,-10*h)*Math.sin((h*k-i)*(2*Math.PI)/j)+l+e},easeInOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k/2)==2){return e+l}if(!j){j=k*(0.3*1.5)}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j)*0.5+l+e},easeInBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return i/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return i/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}});

/* jQuery Cookie plugin */
jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1;}var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}expires='; expires='+date.toUTCString();}var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}};

/* jQuery querystring plugin */
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('M 6(A){4 $11=A.11||\'&\';4 $V=A.V===r?r:j;4 $1p=A.1p===r?\'\':\'[]\';4 $13=A.13===r?r:j;4 $D=$13?A.D===j?"#":"?":"";4 $15=A.15===r?r:j;v.1o=M 6(){4 f=6(o,t){8 o!=1v&&o!==x&&(!!t?o.1t==t:j)};4 14=6(1m){4 m,1l=/\\[([^[]*)\\]/g,T=/^([^[]+)(\\[.*\\])?$/.1r(1m),k=T[1],e=[];19(m=1l.1r(T[2]))e.u(m[1]);8[k,e]};4 w=6(3,e,7){4 o,y=e.1b();b(I 3!=\'X\')3=x;b(y===""){b(!3)3=[];b(f(3,L)){3.u(e.h==0?7:w(x,e.z(0),7))}n b(f(3,1a)){4 i=0;19(3[i++]!=x);3[--i]=e.h==0?7:w(3[i],e.z(0),7)}n{3=[];3.u(e.h==0?7:w(x,e.z(0),7))}}n b(y&&y.T(/^\\s*[0-9]+\\s*$/)){4 H=1c(y,10);b(!3)3=[];3[H]=e.h==0?7:w(3[H],e.z(0),7)}n b(y){4 H=y.B(/^\\s*|\\s*$/g,"");b(!3)3={};b(f(3,L)){4 18={};1w(4 i=0;i<3.h;++i){18[i]=3[i]}3=18}3[H]=e.h==0?7:w(3[H],e.z(0),7)}n{8 7}8 3};4 C=6(a){4 p=d;p.l={};b(a.C){v.J(a.Z(),6(5,c){p.O(5,c)})}n{v.J(1u,6(){4 q=""+d;q=q.B(/^[?#]/,\'\');q=q.B(/[;&]$/,\'\');b($V)q=q.B(/[+]/g,\' \');v.J(q.Y(/[&;]/),6(){4 5=1e(d.Y(\'=\')[0]||"");4 c=1e(d.Y(\'=\')[1]||"");b(!5)8;b($15){b(/^[+-]?[0-9]+\\.[0-9]*$/.1d(c))c=1A(c);n b(/^[+-]?[0-9]+$/.1d(c))c=1c(c,10)}c=(!c&&c!==0)?j:c;b(c!==r&&c!==j&&I c!=\'1g\')c=c;p.O(5,c)})})}8 p};C.1H={C:j,1G:6(5,1f){4 7=d.Z(5);8 f(7,1f)},1h:6(5){b(!f(5))8 d.l;4 K=14(5),k=K[0],e=K[1];4 3=d.l[k];19(3!=x&&e.h!=0){3=3[e.1b()]}8 I 3==\'1g\'?3:3||""},Z:6(5){4 3=d.1h(5);b(f(3,1a))8 v.1E(j,{},3);n b(f(3,L))8 3.z(0);8 3},O:6(5,c){4 7=!f(c)?x:c;4 K=14(5),k=K[0],e=K[1];4 3=d.l[k];d.l[k]=w(3,e.z(0),7);8 d},w:6(5,c){8 d.N().O(5,c)},1s:6(5){8 d.O(5,x).17()},1z:6(5){8 d.N().1s(5)},1j:6(){4 p=d;v.J(p.l,6(5,7){1y p.l[5]});8 p},1F:6(Q){4 D=Q.B(/^.*?[#](.+?)(?:\\?.+)?$/,"$1");4 S=Q.B(/^.*?[?](.+?)(?:#.+)?$/,"$1");8 M C(Q.h==S.h?\'\':S,Q.h==D.h?\'\':D)},1x:6(){8 d.N().1j()},N:6(){8 M C(d)},17:6(){6 F(G){4 R=I G=="X"?f(G,L)?[]:{}:G;b(I G==\'X\'){6 1k(o,5,7){b(f(o,L))o.u(7);n o[5]=7}v.J(G,6(5,7){b(!f(7))8 j;1k(R,5,F(7))})}8 R}d.l=F(d.l);8 d},1B:6(){8 d.N().17()},1D:6(){4 i=0,U=[],W=[],p=d;4 16=6(E){E=E+"";b($V)E=E.B(/ /g,"+");8 1C(E)};4 1n=6(1i,5,7){b(!f(7)||7===r)8;4 o=[16(5)];b(7!==j){o.u("=");o.u(16(7))}1i.u(o.P(""))};4 F=6(R,k){4 12=6(5){8!k||k==""?[5].P(""):[k,"[",5,"]"].P("")};v.J(R,6(5,7){b(I 7==\'X\')F(7,12(5));n 1n(W,12(5),7)})};F(d.l);b(W.h>0)U.u($D);U.u(W.P($11));8 U.P("")}};8 M C(1q.S,1q.D)}}(v.1o||{});',62,106,'|||target|var|key|function|value|return|||if|val|this|tokens|is||length||true|base|keys||else||self||false|||push|jQuery|set|null|token|slice|settings|replace|queryObject|hash|str|build|orig|index|typeof|each|parsed|Array|new|copy|SET|join|url|obj|search|match|queryString|spaces|chunks|object|split|get||separator|newKey|prefix|parse|numbers|encode|COMPACT|temp|while|Object|shift|parseInt|test|decodeURIComponent|type|number|GET|arr|EMPTY|add|rx|path|addFields|query|suffix|location|exec|REMOVE|constructor|arguments|undefined|for|empty|delete|remove|parseFloat|compact|encodeURIComponent|toString|extend|load|has|prototype'.split('|'),0,{}))
